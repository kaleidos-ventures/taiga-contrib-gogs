angular.module("templates").run(["$templateCache",function($templateCache){$templateCache.put("/plugins/gogs/gogs.html",'\n<div contrib-gogs-webhooks="contrib-gogs-webhooks" ng-controller="ContribGogsAdminController as ctrl">\n  <header>\n    <h1><span class="project-name">{{::project.name}}</span><span class="green">{{::sectionName}}</span></h1>\n  </header>\n  <form>\n    <fieldset>\n      <label for="secret-key">Secret key</label>\n      <input type="text" name="secret-key" ng-model="gogs.secret" placeholder="Secret key" id="secret-key"/>\n    </fieldset>\n    <fieldset>\n      <div tg-select-input-text="tg-select-input-text" class="select-input-text">\n        <div>\n          <label for="payload-url">Payload URL</label>\n          <div class="field-with-option">\n            <input type="text" ng-model="gogs.webhooks_url" name="payload-url" readonly="readonly" placeholder="Payload URL" id="payload-url"/>\n            <div class="option-wrapper select-input-content">\n              <tg-svg svg-icon="icon-clipboard"></tg-svg>\n            </div>\n          </div>\n          <div class="help-copy">Copy to clipboard: Ctrl+C</div>\n        </div>\n      </div>\n    </fieldset>\n    <button type="submit" class="hidden"></button><a href="" title="Save" class="button-green submit-button"><span>Save</span></a>\n  </form><a href="https://tree.taiga.io/support/contrib-plugins/gogs-integration/" target="_blank" class="help-button">\n    <tg-svg svg-icon="icon-question"></tg-svg><span>Do you need help? Check out our support page!</span></a>\n</div>')}]),function(){var GogsAdmin,GogsWebhooksDirective,debounce,initGogsPlugin,module;debounce=function(wait,func){return _.debounce(func,wait,{leading:!0,trailing:!1})},GogsAdmin=function(){function GogsAdmin(rootScope,scope,rs,appMetaService,confirm){this.rootScope=rootScope,this.scope=scope,this.rs=rs,this.appMetaService=appMetaService,this.confirm=confirm,this.scope.sectionName="Gogs",this.scope.sectionSlug="gogs",this.scope.$on("project:loaded",function(_this){return function(){var promise;return promise=_this.rs.modules.list(_this.scope.projectId,"gogs"),promise.then(function(gogs){var description,title;return _this.scope.gogs=gogs,title=_this.scope.sectionName+" - Plugins - "+_this.scope.project.name,description=_this.scope.project.description,_this.appMetaService.setAll(title,description)}),promise.then(null,function(){return _this.confirm.notify("error")})}}(this))}return GogsAdmin.$inject=["$rootScope","$scope","$tgResources","tgAppMetaService","$tgConfirm"],GogsAdmin}(),GogsWebhooksDirective=function($repo,$confirm,$loading){var link;return link=function($scope,$el,$attrs){var form,submit,submitButton;return form=$el.find("form").checksley({onlyOneErrorElement:!0}),submit=debounce(2e3,function(_this){return function(event){var currentLoading,promise;if(event.preventDefault(),form.validate())return currentLoading=$loading().target(submitButton).start(),promise=$repo.saveAttribute($scope.gogs,"gogs"),promise.then(function(){return currentLoading.finish(),$confirm.notify("success"),$scope.$emit("project:modules:reload")}),promise.then(null,function(data){if(currentLoading.finish(),form.setErrors(data),data._error_message)return $confirm.notify("error",data._error_message)})}}(this)),submitButton=$el.find(".submit-button"),$el.on("submit","form",submit),$el.on("click",".submit-button",submit)},{link:link}},module=angular.module("taigaContrib.gogs",[]),module.controller("ContribGogsAdminController",GogsAdmin),module.directive("contribGogsWebhooks",["$tgRepo","$tgConfirm","$tgLoading",GogsWebhooksDirective]),initGogsPlugin=function($tgUrls){return $tgUrls.update({gogs:"/gogs-hook"})},module.run(["$tgUrls",initGogsPlugin])}.call(this);